{"version":3,"file":"setProperty.js","sources":["../../../src/obj/setProperty.js"],"sourcesContent":["import isUndefined from \"../type-checks/isUndefined.js\";\r\nimport propertyPath from \"../str/propertyPath.js\";\r\nimport bisect from \"../str/bisect.js\";\r\nimport isArray from \"../type-checks/isArray.js\";\r\nimport isPlainObject from \"../type-checks/isPlainObject.js\";\r\nimport isString from \"../type-checks/isString.js\";\r\n\r\nconst CREATE_ARRAY_REGEX = /^\\d+($|\\.)/;\r\n\r\nconst setProperty = ( target, path, value, create = false ) => {\r\n    if ( isArray( target ) || isPlainObject( target ) ) {\r\n        const normalized = propertyPath( path );\r\n        const [ prop, remainder ] = bisect( normalized, \".\" );\r\n        if ( isString( prop, true ) ) {\r\n            if ( isString( remainder, true ) ) {\r\n                if ( create && isUndefined( target[ prop ] ) ) {\r\n                    // check if we should create an array or object by testing the remainder.\r\n                    // if the remainder starts with a number then create an array\r\n                    target[ prop ] = CREATE_ARRAY_REGEX.test( remainder ) ? [] : {};\r\n                }\r\n                if ( isArray( target[ prop ] ) || isPlainObject( target[ prop ] ) ) {\r\n                    setProperty( target[ prop ], remainder, value, create );\r\n                }\r\n                return;\r\n            }\r\n            if ( create || !isUndefined( target[ prop ] ) )\r\n                target[ prop ] = value;\r\n        }\r\n    }\r\n};\r\n\r\nexport default setProperty;"],"names":["CREATE_ARRAY_REGEX","setProperty","target","path","value","create","arguments","length","undefined","isArray","isPlainObject","normalized","propertyPath","prop","remainder","bisect","isString","isUndefined","test"],"mappings":"qPAOA,MAAMA,EAAqB,aAErBC,EAAc,SAAEC,EAAQC,EAAMC,GAA2B,IAApBC,EAAMC,UAAAC,OAAA,QAAAC,IAAAF,UAAA,IAAAA,UAAA,GAC7C,GAAKG,EAASP,IAAYQ,EAAeR,GAAW,CAChD,MAAMS,EAAaC,EAAcT,IACzBU,EAAMC,GAAcC,EAAQJ,EAAY,KAChD,GAAKK,EAAUH,GAAM,GAAS,CAC1B,GAAKG,EAAUF,GAAW,GAStB,OARKT,GAAUY,EAAaf,EAAQW,MAGhCX,EAAQW,GAASb,EAAmBkB,KAAMJ,GAAc,GAAK,UAE5DL,EAASP,EAAQW,KAAYH,EAAeR,EAAQW,MACrDZ,EAAaC,EAAQW,GAAQC,EAAWV,EAAOC,KAIlDA,GAAWY,EAAaf,EAAQW,MACjCX,EAAQW,GAAST,EACzB,CACJ,CACJ"}